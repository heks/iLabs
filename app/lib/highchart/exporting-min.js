(function(e){var t=e.Chart,n=e.addEvent,r=e.removeEvent,i=e.createElement,s=e.discardElement,o=e.css,u=e.merge,a=e.each,f=e.extend,l=Math.max,c=document,h=window,p=e.isTouchDevice,d=e.Renderer.prototype.symbols,v=e.getOptions(),m;f(v.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"});v.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:"none",color:"#303030",fontSize:p?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}};v.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}};e.post=function(e,t){var n,r;r=i("form",{method:"post",action:e,enctype:"multipart/form-data"},{display:"none"},c.body);for(n in t)i("input",{type:"hidden",name:n,value:t[n]},null,r);r.submit();s(r)};f(t.prototype,{getSVG:function(t){var n=this,r,o,l,h,p=u(n.options,t);if(!c.createElementNS)c.createElementNS=function(e,t){return c.createElement(t)};t=i("div",null,{position:"absolute",top:"-9999em",width:n.chartWidth+"px",height:n.chartHeight+"px"},c.body);o=n.renderTo.style.width;h=n.renderTo.style.height;o=p.exporting.sourceWidth||p.chart.width||/px$/.test(o)&&parseInt(o,10)||600;h=p.exporting.sourceHeight||p.chart.height||/px$/.test(h)&&parseInt(h,10)||400;f(p.chart,{animation:!1,renderTo:t,forExport:!0,width:o,height:h});p.exporting.enabled=!1;p.series=[];a(n.series,function(e){l=u(e.options,{animation:!1,showCheckbox:!1,visible:e.visible});l.isInternal||p.series.push(l)});r=new e.Chart(p,n.callback);a(["xAxis","yAxis"],function(e){a(n[e],function(t,n){var i=r[e][n],s=t.getExtremes(),o=s.userMin,s=s.userMax;(o!==void 0||s!==void 0)&&i.setExtremes(o,s,!0,!1)})});o=r.container.innerHTML;p=null;r.destroy();s(t);o=o.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/ /g,"Â ").replace(/­/g,"Â­").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(e){return e.toLowerCase()});o=o.replace(/(url\(#highcharts-[0-9]+)"/g,"$1").replace(/"/g,"'");o.match(/ xmlns="/g).length===2&&(o=o.replace(/xmlns="[^"]+"/,""));return o},exportChart:function(t,n){var t=t||{},r=this.options.exporting,r=this.getSVG(u({chart:{borderRadius:0}},r.chartOptions,n,{exporting:{sourceWidth:t.sourceWidth||r.sourceWidth,sourceHeight:t.sourceHeight||r.sourceHeight}})),t=u(this.options.exporting,t);e.post(t.url,{filename:t.filename||"chart",type:t.type,width:t.width||0,scale:t.scale||2,svg:r})},print:function(){var e=this,t=e.container,n=[],r=t.parentNode,i=c.body,s=i.childNodes;if(!e.isPrinting)e.isPrinting=!0,a(s,function(e,t){if(e.nodeType===1)n[t]=e.style.display,e.style.display="none"}),i.appendChild(t),h.focus(),h.print(),setTimeout(function(){r.appendChild(t);a(s,function(e,t){if(e.nodeType===1)e.style.display=n[t]});e.isPrinting=!1},1e3)},contextMenu:function(e,t,r,s,u,c,h){var p=this,d=p.options.navigation,v=d.menuItemStyle,m=p.chartWidth,g=p.chartHeight,y="cache-"+e,b=p[y],w=l(u,c),E,S,x;if(!b)p[y]=b=i("div",{className:"highcharts-"+e},{position:"absolute",zIndex:1e3,padding:w+"px"},p.container),E=i("div",null,f({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},d.menuStyle),b),S=function(){o(b,{display:"none"});h&&h.setState(0);p.openMenu=!1},n(b,"mouseleave",function(){x=setTimeout(S,500)}),n(b,"mouseenter",function(){clearTimeout(x)}),a(t,function(e){if(e){var t=e.separator?i("hr",null,null,E):i("div",{onmouseover:function(){o(this,d.menuItemHoverStyle)},onmouseout:function(){o(this,v)},onclick:function(){S();e.onclick.apply(p,arguments)},innerHTML:e.text||p.options.lang[e.textKey]},f({cursor:"pointer"},v),E);p.exportDivElements.push(t)}}),p.exportDivElements.push(E,b),p.exportMenuWidth=b.offsetWidth,p.exportMenuHeight=b.offsetHeight;e={display:"block"};r+p.exportMenuWidth>m?e.right=m-r-u-w+"px":e.left=r-w+"px";s+c+p.exportMenuHeight>g?e.bottom=g-s-w+"px":e.top=s+c-w+"px";o(b,e);p.openMenu=!0},addButton:function(t){var n=this,r=n.renderer,t=u(n.options.navigation.buttonOptions,t),i=t.onclick,s=t.menuItems,o,a,l={stroke:t.symbolStroke,fill:t.symbolFill},c=t.symbolSize||12;if(!n.btnCount)n.btnCount=0;n.btnCount++;if(!n.exportDivElements)n.exportDivElements=[],n.exportSVGElements=[];if(t.enabled!==!1){var h=t.theme,p=h.states,d=p&&p.hover,p=p&&p.select,v;delete h.states;i?v=function(){i.apply(n,arguments)}:s&&(v=function(){n.contextMenu("contextmenu",s,a.translateX,a.translateY,a.width,a.height,a);a.setState(2)});t.text&&t.symbol?h.paddingLeft=e.pick(h.paddingLeft,25):t.text||f(h,{width:t.width,height:t.height,padding:0});a=r.button(t.text,0,0,v,h,d,p).attr({title:n.options.lang[t._titleKey],"stroke-linecap":"round"});t.symbol&&(o=r.symbol(t.symbol,t.symbolX-c/2,t.symbolY-c/2,c,c).attr(f(l,{"stroke-width":t.symbolStrokeWidth||1,zIndex:1})).add(a));a.add().align(f(t,{width:a.width,x:e.pick(t.x,m)}),!0,"spacingBox");m+=(a.width+t.buttonSpacing)*(t.align==="right"?-1:1);n.exportSVGElements.push(a,o)}},destroyExport:function(e){var e=e.target,t,n;for(t=0;t<e.exportSVGElements.length;t++)if(n=e.exportSVGElements[t])n.onclick=n.ontouchstart=null,e.exportSVGElements[t]=n.destroy();for(t=0;t<e.exportDivElements.length;t++)n=e.exportDivElements[t],r(n,"mouseleave"),e.exportDivElements[t]=n.onmouseout=n.onmouseover=n.ontouchstart=n.onclick=null,s(n)}});d.menu=function(e,t,n,r){return["M",e,t+2.5,"L",e+n,t+2.5,"M",e,t+r/2+.5,"L",e+n,t+r/2+.5,"M",e,t+r-1.5,"L",e+n,t+r-1.5]};t.prototype.callbacks.push(function(e){var t,r=e.options.exporting,i=r.buttons;m=0;if(r.enabled!==!1){for(t in i)e.addButton(i[t]);n(e,"destroy",e.destroyExport)}})})(Highcharts)